..
      Licensed under the Apache License, Version 2.0 (the "License"); you may
      not use this file except in compliance with the License. You may obtain
      a copy of the License at

          http://www.apache.org/licenses/LICENSE-2.0

      Unless required by applicable law or agreed to in writing, software
      distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
      WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
      License for the specific language governing permissions and limitations
      under the License.

===========================
User and Programmers manual
===========================

Introduction
============

FI-Ware Chef Validator
----------------------

An OpenStack validator for the deployment of chef cookbooks implemented as
a service with an OpenStack-native Rest API

External Dependencies
---------------------

The system deployment depends on several external services for successful completion.
The dependency list reads as follows:

- OpenStack Keystone server:
    Used for issuing user tokens for several OpenStack services

- OpenStack Glance server:
    Used for listing the available virtual machine images

- OpenStack Nova server:
    Used for deploying the selected virtual machine

- Chef server:
    Used to coordinate chef activities

User Guide
==========

Installation
------------

Please, consult the installation and admin guide for details on installation, deployment and testing.

Configuration
-------------

All the system behaviour can be controlled by modifying the configuration files.
The system-wide configuration is accessible in etc/chef_validator/chef_validator.conf
A default configuration is provided for ease of usage, but it can be customized as desired by modifying said file.
A fresh configuration file with all default parameters can be generated by executing:
::

    ./tools/generateconfig.[bat|sh]

Changing the extension based on your os of choice.

Programmer Guide
================

Validation Process
------------------

The cookbook validation process consists on the following steps:

1. The **Client** sends a POST request to the service API, containing:
    - The name of the cookbook to be tested
    - The *Github* repository from which to obtain the cookbook
    - The virtual machine name for deployment
2. The **Server** receives the request and takes the following steps:
    - Checks the user permissions to take the next steps by validating against Keystone
    - Downloads the needed *cookbook*
    - Deploys the selected *Virtual Machine* image
    - Instructs the **Chef Server** to deploy the *cookbook* in the given *Virtual Machine*
    - Responds to the **Client** request informing of the status of the validation process

Translating
===========

The system uses the default locale en_US. To generate stubs for translating to another languages, a custom script is provided in:
::

    ./tools/generatemessages.[bat|sh]

Changing the extension based on your os of choice.
This will generate a locale folder with the default strings and subfolders for each available locale.

API Definition
--------------

The API definition can be found at http://docs.chefvalidatorapi.apiary.io/#
